<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered PM Internship Matchmaker</title>
    <!-- Use the Inter font for a modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS from CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
  
body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #f9fafb, #f3f4f6);
    color: #1f2937;
}

/* Card-like container with glass + neumorphic effect */
.container-shadow {
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(14px) saturate(150%);
    box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.08),
                -6px -6px 16px rgba(255, 255, 255, 0.7);
    border-radius: 18px;
    border: 1px solid rgba(229, 231, 235, 0.5);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.container-shadow:hover {
    transform: translateY(-4px);
    box-shadow: 12px 12px 28px rgba(0, 0, 0, 0.12),
                -8px -8px 18px rgba(255, 255, 255, 0.8);
}

/* Modal Overlay */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    inset: 0;
    background: rgba(17, 24, 39, 0.6);
    backdrop-filter: blur(8px);
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.35s ease-in-out;
}

/* Modal Content */
.modal-content {
    background: linear-gradient(145deg, #ffffff, #f9fafb);
    padding: 32px;
    border-radius: 20px;
    border: 1px solid #e5e7eb;
    max-width: 92%;
    max-height: 90%;
    overflow-y: auto;
    transform: translateY(-30px) scale(0.96);
    transition: transform 0.35s ease, opacity 0.35s ease;
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.18);
}
.modal-open {
    display: flex;
    opacity: 1;
}
.modal-open .modal-content {
    transform: translateY(0) scale(1);
}

/* Close button */
.close-button {
    color: #9ca3af;
    float: right;
    font-size: 28px;
    font-weight: bold;
    transition: color 0.25s ease, transform 0.25s ease;
}
.close-button:hover,
.close-button:focus {
    color: #ef4444;
    transform: rotate(90deg) scale(1.1);
    cursor: pointer;
}

/* Save (heart) button */
.save-button-icon {
    transition: transform 0.25s ease-in-out, color 0.25s ease;
    color: #9ca3af;
}
.save-button-icon.saved {
    color: #ef4444;
    transform: scale(1.35);
    filter: drop-shadow(0 2px 5px rgba(239, 68, 68, 0.55));
}
.save-button-icon:hover {
    transform: scale(1.25);
    color: #f87171;
}

/* Skill tags */
.skill-tag {
    cursor: pointer;
    background: linear-gradient(145deg, #f3f4f6, #e5e7eb);
    color: #374151;
    font-size: 0.85rem;
    padding: 0.4rem 0.9rem;
    border-radius: 999px;
    transition: all 0.25s ease;
    border: 1px solid transparent;
    box-shadow: inset 0 1px 2px rgba(255,255,255,0.7),
                inset 0 -2px 4px rgba(0,0,0,0.05);
}
.skill-tag:hover {
    background: linear-gradient(145deg, #dbeafe, #bfdbfe);
    color: #1d4ed8;
    border-color: #3b82f6;
    transform: translateY(-2px) scale(1.05);
}
.skill-tag.selected {
    background: linear-gradient(145deg, #2563eb, #1d4ed8);
    color: #ffffff;
    font-weight: 600;
    border: 1px solid #1e40af;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.45);
    animation: pulseSelected 0.4s ease;
}
@keyframes pulseSelected {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* Profile Progress Bar */
#profile-completeness-bar {
    background: linear-gradient(90deg, #3b82f6, #2563eb, #1d4ed8);
    background-size: 200% auto;
    animation: progressShine 2s linear infinite;
    border-radius: 999px;
}
@keyframes progressShine {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
}
</style>

</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4 sm:p-6">

    <!-- Main Application Container -->
    <div class="bg-white rounded-xl shadow-lg w-full max-w-4xl p-6 sm:p-8 container-shadow">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">AI-Powered PM Internship Matchmaker</h1>
            <p class="mt-2 text-gray-500 text-lg">Your personalized path to a product management career.</p>
        </header>

        <!-- Main Content Area with two columns for dashboard and recommendations -->
        <main class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- User Profile and Skill Input Section -->
            <div class="md:col-span-1 bg-gray-50 p-6 rounded-lg">
                <h2 class="text-xl font-semibold text-gray-700 mb-4">User Dashboard</h2>
                
                <!-- User Info -->
                <div class="flex items-center space-x-4 mb-6">
                    <div class="flex-shrink-0">
                        <div class="w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-lg">JD</div>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">Jane Doe</p>
                        <p class="text-sm text-gray-500">PM Intern Candidate</p>
                    </div>
                </div>

                <!-- Gamification / Progress Dashboard -->
                <div class="mt-4">
                    <h3 class="font-medium text-gray-700 mb-2">My Profile Progress</h3>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2">
                        <div id="profile-completeness-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%;"></div>
                    </div>
                    <p id="profile-completeness-text" class="text-sm text-gray-600">Complete your profile to get better recommendations.</p>
                </div>

                <!-- Skill Selection Form -->
                <h3 class="font-medium text-gray-700 mt-6 mb-2">Select Your Skills & Interests</h3>
                <p class="text-sm text-gray-600 mb-4">Choose the skills that best describe you from the options below.</p>
                <div id="skill-tags-container" class="flex flex-wrap gap-2">
                    <!-- Skill tags will be dynamically inserted here -->
                </div>
                <button onclick="updateRecommendations()" class="mt-4 w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-full hover:bg-blue-700 transition-colors">Find My Matches</button>
                <button onclick="fetchLatestInternships()" class="mt-2 w-full bg-gray-700 text-white font-semibold py-2 px-4 rounded-full hover:bg-gray-800 transition-colors text-sm">Simulate Latest Internship Update</button>

                <!-- Saved Internships -->
                <div class="mt-8">
                    <h3 class="font-medium text-gray-700 mb-4">Saved Internships <span id="saved-count" class="text-sm text-gray-500">(0)</span></h3>
                    <div id="saved-internships-container" class="space-y-2">
                        <p class="text-sm text-gray-500">No saved internships yet.</p>
                    </div>
                </div>
            </div>

            <!-- Internship Recommendations Section -->
            <div class="md:col-span-2 space-y-6">
                <h2 class="text-xl font-semibold text-gray-700">Recommended Internships</h2>
                <!-- Recommendations will be dynamically inserted here by JavaScript -->
                <div id="recommendations-container" class="space-y-4">
                    <p class="text-center text-gray-500">Select your skills and click 'Find My Matches' to see personalized recommendations!</p>
                </div>
            </div>
        </main>
    </div>

    <!-- The Modal for displaying internship details -->
    <div id="detailsModal" class="modal">
        <div class="modal-content container-shadow w-full max-w-xl">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="modal-content-inner">
                <!-- Content will be injected here -->
            </div>
        </div>
    </div>

    <!-- The Modal for displaying upskill suggestion -->
    <div id="upskillModal" class="modal">
        <div class="modal-content container-shadow w-full max-w-lg text-center">
            <span class="close-button" onclick="closeUpskillModal()">&times;</span>
            <div id="upskill-content-inner">
                <p class="text-gray-700 mb-4 text-lg font-semibold">Upskill to Improve Your Match!</p>
                <p class="text-gray-600 mb-6">Based on this role's requirements, we recommend you take a course on:</p>
                <div id="upskill-suggestion" class="bg-yellow-100 text-yellow-800 p-4 rounded-lg font-bold"></div>
                <a href="#" target="_blank" id="upskill-link" class="mt-6 inline-block bg-yellow-500 text-white font-semibold py-2 px-6 rounded-full hover:bg-yellow-600 transition-colors">Find Course</a>
            </div>
        </div>
    </div>

    <script>
        // Mock data for internships based on recent AICTE portal updates
        let internships = [
            {
                id: 'ai-green-tech',
                title: 'AI with Green Technology Virtual Internship',
                company: 'Edunet Foundation & Shell',
                description: 'Dive into the world of AI with Green Technology. This certified program focuses on developing project prototypes to tackle real-world challenges with guidance from industry mentors.',
                skills: ['artificial intelligence', 'machine learning', 'data analysis', 'python', 'green technology'],
                careerPath: 'Students who take this internship often pursue roles as: Data Analyst, AI/ML Engineer, or Green Tech Consultant.'
            },
            {
                id: 'data-analytics-iot',
                title: 'Data Analytics & IoT Intern',
                company: 'NIELIT Daman',
                description: 'A work-based learning program focusing on data analytics, AI/ML, solar technology, and IoT. You will be mentored by scientists and experts at NIELIT.',
                skills: ['data analysis', 'iot', 'ai/ml', 'solar technology', 'python'],
                careerPath: 'This role is a great stepping stone to careers in: IoT Solutions Architect, Data Scientist, or Systems Engineer.'
            },
            {
                id: 'web-dev-ai-ml',
                title: 'Web Development with AI/ML',
                company: 'NIELIT Dibrugarh',
                description: 'Develop skills in web development and Android programming with a focus on integrating AI/ML technologies. Work on practical projects with a dedicated team.',
                skills: ['web development', 'android programming', 'ai/ml', 'javascript', 'backend development'],
                careerPath: 'This is a fantastic start for a career as a: Full-Stack Developer, AI Product Manager, or Mobile App Developer.'
            },
            {
                id: 'ai-career-program',
                title: '9-Week AI Career Internship',
                company: 'XTRAGRAD',
                description: 'A short-term, intensive program to build real-world AI skills through hands-on projects. High-performing interns may receive job offers.',
                skills: ['artificial intelligence', 'machine learning', 'deep learning', 'data science', 'python'],
                careerPath: 'This intensive program can lead to roles such as: AI/ML Engineer, Research Scientist, or Machine Learning Consultant.'
            },
            {
                id: 'digital-transformation',
                title: 'Digital Transformation Expert Intern',
                company: 'JK Tyre & Industries',
                description: 'Focus on advanced computing areas like AI and digital transformation within a corporate training and enablement setting.',
                skills: ['digital transformation', 'corporate training', 'advanced computing', 'ai', 'problem solving'],
                careerPath: 'A great start for a career in: Digital Transformation Consulting, IT Strategy, or Corporate Training.'
            },
            {
                id: 'revenue-management',
                title: 'Revenue Management Professional Intern',
                company: 'The Indian Hotels Company',
                description: 'Gain experience in the hospitality sector with a focus on revenue management, data analysis, and strategic planning.',
                skills: ['revenue management', 'data analysis', 'strategic planning', 'market research', 'hospitality'],
                careerPath: 'This internship is a great entry point for roles like: Revenue Analyst, Product Manager, or Business Development Manager.'
            }
        ];

        // A second set of mock data to simulate a fresh API call
        const newInternships = [
            {
                id: 'project-manager-telecom',
                title: 'Associate Product Manager Intern',
                company: 'Reliance Industries',
                description: 'Work on new product launches and manage the product lifecycle for a leading telecommunications giant.',
                skills: ['product strategy', 'market research', 'agile methodologies', 'project management'],
                careerPath: 'This internship is a direct path to a full-time Product Manager role in the telecom sector.'
            },
            {
                id: 'product-analytics-finance',
                title: 'Product Analytics Intern',
                company: 'HDFC Bank',
                description: 'Analyze user behavior data to inform product decisions for digital banking solutions. Requires strong data and analytical skills.',
                skills: ['data analysis', 'sql', 'business intelligence', 'financial modeling'],
                careerPath: 'Students in this role often become Product Analysts, Data Scientists, or Business Analysts.'
            },
            {
                id: 'ai-automotive',
                title: 'AI Solutions Engineer Intern',
                company: 'Maruti Suzuki India',
                description: 'Develop and prototype AI-based features for in-car systems and vehicle diagnostics. An excellent opportunity to work on cutting-edge technology.',
                skills: ['artificial intelligence', 'machine learning', 'python', 'deep learning'],
                careerPath: 'This is a gateway to a career in Automotive AI, Robotics, or IoT development.'
            },
            {
                id: 'cloud-dev-tcs',
                title: 'Cloud Development Intern',
                company: 'Tata Consultancy Services',
                description: 'Assist in developing and deploying cloud-native applications for enterprise clients. Focus on modern development practices and cloud platforms.',
                skills: ['web development', 'backend development', 'javascript', 'project management', 'agile methodologies'],
                careerPath: 'Common career trajectories include Cloud Engineer, DevOps Specialist, or Software Development Engineer.'
            },
            {
                id: 'ux-design-lnt',
                title: 'UX/UI Design Intern',
                company: 'Larsen & Toubro',
                description: 'Work on user experience and interface design for large-scale engineering and construction software. A great blend of design and technology.',
                skills: ['user experience', 'ux/ui design', 'prototyping', 'user research'],
                careerPath: 'Successful interns may become UX Designers, Product Designers, or Human-Computer Interaction Specialists.'
            }
        ];

        // A simple mapping to simulate semantic matching (Skill Embeddings)
        const skillMappings = {
            'data analysis': ['data visualization', 'sql', 'business intelligence', 'quantitative analysis'],
            'machine learning': ['scikit-learn', 'tensorflow', 'pytorch', 'statistical modeling'],
            'web development': ['html', 'css', 'javascript', 'react', 'angular', 'node.js', 'backend development', 'full stack'],
            'product strategy': ['user research', 'agile methodologies', 'feature roadmapping'],
            'ai/ml': ['artificial intelligence', 'machine learning', 'deep learning'],
            'iot': ['sensors', 'hardware', 'embedded systems'],
            'python': ['python programming', 'data science', 'web scraping'],
            'javascript': ['js', 'front-end', 'node.js']
        };

        // A predefined list of important skills to track for profile completeness
        const allAvailableSkills = [
            'product strategy', 'agile methodologies', 'user experience', 'data analysis', 'sql', 
            'machine learning', 'artificial intelligence', 'python', 'web development', 
            'javascript', 'iot', 'digital transformation', 'project management', 
            'market research', 'strategic planning', 'backend development', 'mobile app development'
        ];

        let savedInternships = [];
        let selectedSkills = [];

        // Function to initialize skill tags on page load
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('skill-tags-container');
            allAvailableSkills.forEach(skill => {
                const tag = document.createElement('span');
                tag.className = 'skill-tag bg-gray-200 text-gray-700 text-sm px-3 py-1 rounded-full cursor-pointer hover:bg-gray-300 transition-colors';
                tag.textContent = skill.charAt(0).toUpperCase() + skill.slice(1);
                tag.dataset.skill = skill;
                tag.onclick = () => toggleSkill(skill, tag);
                container.appendChild(tag);
            });
        });

        // Function to toggle skill selection
        function toggleSkill(skill, tag) {
            const index = selectedSkills.indexOf(skill);
            if (index > -1) {
                selectedSkills.splice(index, 1);
                tag.classList.remove('selected');
            } else {
                selectedSkills.push(skill);
                tag.classList.add('selected');
            }
            updateProfileCompleteness(selectedSkills);
        }

        // Simulates fetching fresh data from an API and updating the application's "database"
        function fetchLatestInternships() {
            // In a real application, this would be an API call to a backend
            // that is regularly pulling data from the AICTE portal or other sources.
            // For now, we'll just replace our mock data with a new set.
            internships = newInternships;
            updateRecommendations();
        }

        // Function to calculate match score and update recommendations
        function updateRecommendations() {
            const recommendationsContainer = document.getElementById('recommendations-container');
            recommendationsContainer.innerHTML = '';

            if (selectedSkills.length === 0) {
                recommendationsContainer.innerHTML = '<p class="text-center text-gray-500">Please select your skills to see personalized recommendations!</p>';
                return;
            }

            // Calculate scores with semantic matching
            const scoredInternships = internships.map(internship => {
                const requiredSkills = internship.skills;
                let score = 0;
                let matchedSkills = [];

                selectedSkills.forEach(userSkill => {
                    // Check for direct match
                    if (requiredSkills.includes(userSkill)) {
                        score += 1;
                        matchedSkills.push(userSkill);
                    }
                    // Check for semantic/related skill match
                    const relatedSkills = skillMappings[userSkill] || [];
                    relatedSkills.forEach(relatedSkill => {
                        if (requiredSkills.includes(relatedSkill) && !matchedSkills.includes(relatedSkill)) {
                            score += 0.5; // Half point for a related skill
                            matchedSkills.push(relatedSkill);
                        }
                    });
                });
                
                // Track unmatched skills for upskilling suggestions
                const unmatchedSkills = requiredSkills.filter(skill => !matchedSkills.includes(skill) && !Object.keys(skillMappings).includes(skill));

                const matchPercentage = requiredSkills.length > 0 ? Math.round((score / requiredSkills.length) * 100) : 0;
                return { 
                    ...internship, 
                    score: matchPercentage,
                    matchedSkills: matchedSkills,
                    unmatchedSkills: unmatchedSkills
                };
            });

            // Sort by score in descending order
            scoredInternships.sort((a, b) => b.score - a.score);

            // Dynamically generate HTML for each recommendation
            scoredInternships.forEach(internship => {
                const isSaved = savedInternships.some(item => item.id === internship.id);
                const badgeColor = internship.score >= 80 ? 'bg-green-100 text-green-800' : (internship.score >= 50 ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800');
                const badgeText = `${internship.score}% Match`;
                const skillsHtml = internship.skills.map(skill => `<span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full">${skill.charAt(0).toUpperCase() + skill.slice(1)}</span>`).join('');
                
                const internshipCard = `
                    <div class="bg-white border border-gray-200 rounded-lg p-5 transition-shadow duration-300 hover:shadow-lg relative">
                        <div class="absolute top-4 right-4 cursor-pointer" onclick="toggleSave('${internship.id}')">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 save-button-icon ${isSaved ? 'saved' : ''}" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </div>
                        <div class="flex justify-between items-center mb-2 cursor-pointer" onclick="showDetails('${internship.id}')">
                            <h3 class="text-lg font-bold text-gray-800">${internship.title}</h3>
                            <span class="${badgeColor} text-xs font-medium px-2 py-1 rounded-full">${badgeText}</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-3">${internship.company}</p>
                        <p class="text-gray-600 text-sm">${internship.description}</p>
                        <div class="mt-4 flex flex-wrap gap-2">
                            ${skillsHtml}
                        </div>
                    </div>
                `;
                recommendationsContainer.innerHTML += internshipCard;
            });
        }

        function updateProfileCompleteness(userSkills) {
            let matchedKeys = 0;
            // The `allAvailableSkills` array is the correct source for the completeness check
            allAvailableSkills.forEach(keySkill => {
                if (userSkills.includes(keySkill)) {
                    matchedKeys++;
                }
            });
            const completeness = Math.round((matchedKeys / allAvailableSkills.length) * 100);
            const bar = document.getElementById('profile-completeness-bar');
            const text = document.getElementById('profile-completeness-text');
            bar.style.width = `${completeness}%`;
            text.innerText = `Profile completeness: ${completeness}% - Add more skills to improve your matches!`;
        }

        // Toggles saving an internship
        function toggleSave(internshipId) {
            const internship = internships.find(i => i.id === internshipId);
            const savedIndex = savedInternships.findIndex(item => item.id === internshipId);
            if (savedIndex === -1) {
                savedInternships.push(internship);
            } else {
                savedInternships.splice(savedIndex, 1);
            }
            updateSavedInternshipsUI();
            updateRecommendations(); // Re-render recommendations to show updated saved state
        }

        // Updates the list of saved internships in the dashboard
        function updateSavedInternshipsUI() {
            const savedContainer = document.getElementById('saved-internships-container');
            savedContainer.innerHTML = '';
            document.getElementById('saved-count').innerText = `(${savedInternships.length})`;

            if (savedInternships.length === 0) {
                savedContainer.innerHTML = '<p class="text-sm text-gray-500">No saved internships yet.</p>';
            } else {
                savedInternships.forEach(internship => {
                    const savedItem = `
                        <div class="flex items-center justify-between p-2 rounded-md bg-white border border-gray-200">
                            <div class="flex-1">
                                <p class="text-sm font-semibold text-gray-800">${internship.title}</p>
                                <p class="text-xs text-gray-500">${internship.company}</p>
                            </div>
                            <button onclick="toggleSave('${internship.id}')" class="text-red-500 hover:text-red-600 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    `;
                    savedContainer.innerHTML += savedItem;
                });
            }
        }

        // Modal functions
        function showDetails(internshipId) {
            const internship = internships.find(i => i.id === internshipId);
            const scoredInternship = getScoredInternship(internshipId);
            const modal = document.getElementById('detailsModal');
            const modalContent = document.getElementById('modal-content-inner');
            
            // Get skills to highlight for Explainable AI
            const userSkills = selectedSkills;
            const matchedSkills = internship.skills.filter(s => userSkills.includes(s) || (Object.keys(skillMappings).includes(s) && userSkills.some(us => skillMappings[s].includes(us))));
            
            // Build the explanation text
            const explanationText = matchedSkills.length > 0 
                ? `This internship was recommended because it aligns with your skills in: **${matchedSkills.join(', ')}**.`
                : 'This internship is recommended because its requirements are closely related to your selected skills.';

            let upskillButton = '';
            let skillsToUpskill = [];
            if(scoredInternship && scoredInternship.unmatchedSkills.length > 0) {
                skillsToUpskill = scoredInternship.unmatchedSkills.slice(0, 2); // Show top 2 for brevity
                upskillButton = `<button onclick="showUpskillModal('${skillsToUpskill.join(', ')}')" class="mt-4 w-full bg-yellow-500 text-white font-semibold py-2 px-4 rounded-full hover:bg-yellow-600 transition-colors">Upskill for this Role</button>`;
            }


            if (internship) {
                modalContent.innerHTML = `
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">${internship.title}</h2>
                    <p class="text-sm text-gray-500 mb-4">${internship.company}</p>
                    <p class="text-gray-700">${internship.description}</p>
                    <div class="mt-6 p-4 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-sm">
                        <p class="font-semibold mb-1">Our AI Engine says:</p>
                        <p>${explanationText}</p>
                    </div>
                    <div class="mt-6">
                        <h3 class="font-semibold text-gray-700 mb-2">Career Path Guidance</h3>
                        <p class="text-sm text-gray-600">${internship.careerPath}</p>
                    </div>
                    <h3 class="font-semibold text-gray-700 mt-6 mb-2">Required Skills</h3>
                    <div class="flex flex-wrap gap-2">
                        ${internship.skills.map(skill => `<span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-1 rounded-full">${skill.charAt(0).toUpperCase() + skill.slice(1)}</span>`).join('')}
                    </div>
                    <div class="mt-8 flex justify-end">
                        <button onclick="closeModal()" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition-colors mr-2">Close</button>
                        <a href="#" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-full hover:bg-blue-700 transition-colors">Apply Now</a>
                    </div>
                    ${upskillButton}
                `;
                modal.classList.add('modal-open');
            }
        }

        // Helper function to get the scored object for the modal
        function getScoredInternship(internshipId) {
            const userSkills = selectedSkills;
            const internship = internships.find(i => i.id === internshipId);

            if (!internship) return null;

            const requiredSkills = internship.skills;
            let score = 0;
            let matchedSkills = [];

            userSkills.forEach(userSkill => {
                if (requiredSkills.includes(userSkill)) {
                    score += 1;
                    matchedSkills.push(userSkill);
                }
                const relatedSkills = skillMappings[userSkill] || [];
                relatedSkills.forEach(relatedSkill => {
                    if (requiredSkills.includes(relatedSkill) && !matchedSkills.includes(relatedSkill)) {
                        score += 0.5;
                        matchedSkills.push(relatedSkill);
                    }
                });
            });
            const unmatchedSkills = requiredSkills.filter(skill => !matchedSkills.includes(skill));
            return {
                ...internship,
                score: requiredSkills.length > 0 ? Math.round((score / requiredSkills.length) * 100) : 0,
                matchedSkills: matchedSkills,
                unmatchedSkills: unmatchedSkills
            };
        }


        function closeModal() {
            const modal = document.getElementById('detailsModal');
            modal.classList.remove('modal-open');
        }

        function showUpskillModal(skills) {
            const upskillModal = document.getElementById('upskillModal');
            const upskillSuggestion = document.getElementById('upskill-suggestion');
            const upskillLink = document.getElementById('upskill-link');
            
            const skillsArray = skills.split(',').map(s => s.trim());
            const skillText = skillsArray.length > 1 ? skillsArray.join(' and ') : skillsArray[0];
            
            upskillSuggestion.innerText = skillText.toUpperCase();
            // Mock link to a learning platform
            upskillLink.href = `https://www.coursera.org/search?query=${skillsArray[0]}`; 
            
            upskillModal.classList.add('modal-open');
        }

        function closeUpskillModal() {
            const upskillModal = document.getElementById('upskillModal');
            upskillModal.classList.remove('modal-open');
        }
    </script>
</body>
</html>
